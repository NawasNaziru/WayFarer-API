var cov_2qn8m28rek=function(){var path="C:\\Users\\owner\\Banka\\app_api\\controllers\\accounts.js";var hash="7dd890fabad7ae31305b00bbb695e9de5541ebd6";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\owner\\Banka\\app_api\\controllers\\accounts.js",statementMap:{"0":{start:{line:3,column:25},end:{line:6,column:1}},"1":{start:{line:4,column:2},end:{line:4,column:21}},"2":{start:{line:5,column:2},end:{line:5,column:20}},"3":{start:{line:10,column:2},end:{line:10,column:184}},"4":{start:{line:13,column:14},end:{line:20,column:1}},"5":{start:{line:14,column:2},end:{line:18,column:3}},"6":{start:{line:14,column:15},end:{line:14,column:16}},"7":{start:{line:15,column:4},end:{line:17,column:5}},"8":{start:{line:16,column:6},end:{line:16,column:18}},"9":{start:{line:19,column:2},end:{line:19,column:15}},"10":{start:{line:23,column:0},end:{line:58,column:2}},"11":{start:{line:24,column:2},end:{line:57,column:3}},"12":{start:{line:25,column:4},end:{line:28,column:7}},"13":{start:{line:30,column:4},end:{line:35,column:5}},"14":{start:{line:31,column:6},end:{line:34,column:9}},"15":{start:{line:37,column:20},end:{line:37,column:22}},"16":{start:{line:39,column:4},end:{line:39,column:40}},"17":{start:{line:40,column:4},end:{line:40,column:21}},"18":{start:{line:41,column:4},end:{line:41,column:43}},"19":{start:{line:42,column:4},end:{line:42,column:41}},"20":{start:{line:43,column:4},end:{line:43,column:35}},"21":{start:{line:44,column:4},end:{line:44,column:40}},"22":{start:{line:45,column:4},end:{line:45,column:34}},"23":{start:{line:46,column:4},end:{line:46,column:36}},"24":{start:{line:47,column:4},end:{line:47,column:45}},"25":{start:{line:48,column:4},end:{line:48,column:30}},"26":{start:{line:49,column:4},end:{line:49,column:27}},"27":{start:{line:50,column:4},end:{line:50,column:46}},"28":{start:{line:53,column:4},end:{line:53,column:46}},"29":{start:{line:56,column:4},end:{line:56,column:63}},"30":{start:{line:60,column:0},end:{line:111,column:2}},"31":{start:{line:61,column:2},end:{line:67,column:3}},"32":{start:{line:62,column:4},end:{line:65,column:7}},"33":{start:{line:66,column:4},end:{line:66,column:11}},"34":{start:{line:69,column:2},end:{line:75,column:3}},"35":{start:{line:70,column:4},end:{line:73,column:7}},"36":{start:{line:74,column:4},end:{line:74,column:11}},"37":{start:{line:78,column:2},end:{line:84,column:3}},"38":{start:{line:79,column:4},end:{line:82,column:7}},"39":{start:{line:83,column:4},end:{line:83,column:11}},"40":{start:{line:86,column:2},end:{line:92,column:3}},"41":{start:{line:87,column:4},end:{line:90,column:7}},"42":{start:{line:91,column:4},end:{line:91,column:11}},"43":{start:{line:94,column:2},end:{line:101,column:3}},"44":{start:{line:96,column:4},end:{line:99,column:7}},"45":{start:{line:100,column:4},end:{line:100,column:11}},"46":{start:{line:104,column:2},end:{line:106,column:60}},"47":{start:{line:107,column:18},end:{line:107,column:52}},"48":{start:{line:110,column:2},end:{line:110,column:61}},"49":{start:{line:113,column:0},end:{line:158,column:2}},"50":{start:{line:114,column:2},end:{line:120,column:3}},"51":{start:{line:115,column:4},end:{line:118,column:7}},"52":{start:{line:119,column:4},end:{line:119,column:11}},"53":{start:{line:122,column:2},end:{line:157,column:3}},"54":{start:{line:123,column:4},end:{line:126,column:7}},"55":{start:{line:128,column:4},end:{line:134,column:5}},"56":{start:{line:129,column:6},end:{line:132,column:9}},"57":{start:{line:133,column:6},end:{line:133,column:13}},"58":{start:{line:136,column:25},end:{line:136,column:46}},"59":{start:{line:138,column:4},end:{line:144,column:5}},"60":{start:{line:139,column:6},end:{line:142,column:9}},"61":{start:{line:143,column:6},end:{line:143,column:13}},"62":{start:{line:146,column:4},end:{line:153,column:5}},"63":{start:{line:148,column:6},end:{line:151,column:9}},"64":{start:{line:152,column:6},end:{line:152,column:13}},"65":{start:{line:155,column:4},end:{line:155,column:46}},"66":{start:{line:156,column:4},end:{line:156,column:90}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:25},end:{line:3,column:26}},loc:{start:{line:3,column:57},end:{line:6,column:1}},line:3},"1":{name:"timeStamp",decl:{start:{line:9,column:9},end:{line:9,column:18}},loc:{start:{line:9,column:21},end:{line:11,column:1}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:13,column:14},end:{line:13,column:15}},loc:{start:{line:13,column:33},end:{line:20,column:1}},line:13},"3":{name:"(anonymous_3)",decl:{start:{line:23,column:24},end:{line:23,column:25}},loc:{start:{line:23,column:44},end:{line:58,column:1}},line:23},"4":{name:"(anonymous_4)",decl:{start:{line:60,column:37},end:{line:60,column:38}},loc:{start:{line:60,column:57},end:{line:111,column:1}},line:60},"5":{name:"(anonymous_5)",decl:{start:{line:113,column:24},end:{line:113,column:25}},loc:{start:{line:113,column:44},end:{line:158,column:1}},line:113}},branchMap:{"0":{loc:{start:{line:15,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:17,column:5}},{start:{line:15,column:4},end:{line:17,column:5}}],line:15},"1":{loc:{start:{line:24,column:2},end:{line:57,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:57,column:3}},{start:{line:24,column:2},end:{line:57,column:3}}],line:24},"2":{loc:{start:{line:24,column:6},end:{line:24,column:91}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:25}},{start:{line:24,column:29},end:{line:24,column:47}},{start:{line:24,column:51},end:{line:24,column:66}},{start:{line:24,column:70},end:{line:24,column:91}}],line:24},"3":{loc:{start:{line:30,column:4},end:{line:35,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:35,column:5}},{start:{line:30,column:4},end:{line:35,column:5}}],line:30},"4":{loc:{start:{line:61,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:67,column:3}},{start:{line:61,column:2},end:{line:67,column:3}}],line:61},"5":{loc:{start:{line:69,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:75,column:3}},{start:{line:69,column:2},end:{line:75,column:3}}],line:69},"6":{loc:{start:{line:78,column:2},end:{line:84,column:3}},type:"if",locations:[{start:{line:78,column:2},end:{line:84,column:3}},{start:{line:78,column:2},end:{line:84,column:3}}],line:78},"7":{loc:{start:{line:86,column:2},end:{line:92,column:3}},type:"if",locations:[{start:{line:86,column:2},end:{line:92,column:3}},{start:{line:86,column:2},end:{line:92,column:3}}],line:86},"8":{loc:{start:{line:94,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:94,column:2},end:{line:101,column:3}},{start:{line:94,column:2},end:{line:101,column:3}}],line:94},"9":{loc:{start:{line:94,column:8},end:{line:95,column:64}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:63}},{start:{line:95,column:9},end:{line:95,column:64}}],line:94},"10":{loc:{start:{line:104,column:2},end:{line:106,column:59}},type:"cond-expr",locations:[{start:{line:105,column:6},end:{line:105,column:58}},{start:{line:106,column:6},end:{line:106,column:59}}],line:104},"11":{loc:{start:{line:114,column:2},end:{line:120,column:3}},type:"if",locations:[{start:{line:114,column:2},end:{line:120,column:3}},{start:{line:114,column:2},end:{line:120,column:3}}],line:114},"12":{loc:{start:{line:122,column:2},end:{line:157,column:3}},type:"if",locations:[{start:{line:122,column:2},end:{line:157,column:3}},{start:{line:122,column:2},end:{line:157,column:3}}],line:122},"13":{loc:{start:{line:128,column:4},end:{line:134,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:134,column:5}},{start:{line:128,column:4},end:{line:134,column:5}}],line:128},"14":{loc:{start:{line:138,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:138,column:4},end:{line:144,column:5}},{start:{line:138,column:4},end:{line:144,column:5}}],line:138},"15":{loc:{start:{line:146,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:153,column:5}},{start:{line:146,column:4},end:{line:153,column:5}}],line:146},"16":{loc:{start:{line:146,column:10},end:{line:147,column:57}},type:"binary-expr",locations:[{start:{line:146,column:10},end:{line:146,column:56}},{start:{line:147,column:11},end:{line:147,column:57}}],line:146}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_2qn8m28rek.s[0]++;/* eslint-disable func-names */ /* eslint-disable no-undef */const sendJSONresponse=function(res,status,content){cov_2qn8m28rek.f[0]++;cov_2qn8m28rek.s[1]++;res.status(status);cov_2qn8m28rek.s[2]++;res.json(content);};// eslint-disable-next-line no-useless-concat
function timeStamp(){cov_2qn8m28rek.f[1]++;cov_2qn8m28rek.s[3]++;return`${new Date().getFullYear()}-${new Date().getMonth()+1}-${new Date().getDate()}  ${new Date().getHours()}:${new Date().getMinutes()}:${new Date().getSeconds()}`;}cov_2qn8m28rek.s[4]++;const hasId=function(arr,id){cov_2qn8m28rek.f[2]++;cov_2qn8m28rek.s[5]++;for(let i=(cov_2qn8m28rek.s[6]++,0);i<arr.length;i+=1){cov_2qn8m28rek.s[7]++;if(arr[i]===id){cov_2qn8m28rek.b[0][0]++;cov_2qn8m28rek.s[8]++;return true;}else{cov_2qn8m28rek.b[0][1]++;}}cov_2qn8m28rek.s[9]++;return false;};cov_2qn8m28rek.s[10]++;module.exports.create=function(req,res){cov_2qn8m28rek.f[3]++;cov_2qn8m28rek.s[11]++;if((cov_2qn8m28rek.b[2][0]++,!req.body.firstName)||(cov_2qn8m28rek.b[2][1]++,!req.body.lastName)||(cov_2qn8m28rek.b[2][2]++,!req.body.email)||(cov_2qn8m28rek.b[2][3]++,!req.body.accountType)){cov_2qn8m28rek.b[1][0]++;cov_2qn8m28rek.s[12]++;sendJSONresponse(res,400,{status:400,error:'First name, last name, email and accountType are required, please!'});}else{cov_2qn8m28rek.b[1][1]++;cov_2qn8m28rek.s[13]++;if(!Users[req.body.email]){cov_2qn8m28rek.b[3][0]++;cov_2qn8m28rek.s[14]++;sendJSONresponse(res,404,{status:404,error:'You have not signed up. Sign up first to create an account!'});}else{cov_2qn8m28rek.b[3][1]++;}const account=(cov_2qn8m28rek.s[15]++,{});cov_2qn8m28rek.s[16]++;account.accountNumber=nextAccount;cov_2qn8m28rek.s[17]++;nextAccount+=1;cov_2qn8m28rek.s[18]++;account.firstName=req.body.firstName;cov_2qn8m28rek.s[19]++;account.lastName=req.body.lastName;cov_2qn8m28rek.s[20]++;account.email=req.body.email;cov_2qn8m28rek.s[21]++;account.type=req.body.accountType;cov_2qn8m28rek.s[22]++;account.openingBalance=0.00;cov_2qn8m28rek.s[23]++;account.createdOn=timeStamp();cov_2qn8m28rek.s[24]++;account.owner=Users[req.body.email].id;cov_2qn8m28rek.s[25]++;account.status='active';cov_2qn8m28rek.s[26]++;account.balance=0.00;cov_2qn8m28rek.s[27]++;account.id=Object.keys(Accounts).length;cov_2qn8m28rek.s[28]++;Accounts[account.accountNumber]=account;cov_2qn8m28rek.s[29]++;sendJSONresponse(res,201,{status:201,data:account});}};cov_2qn8m28rek.s[30]++;module.exports.activate_deactivate=function(req,res){cov_2qn8m28rek.f[4]++;cov_2qn8m28rek.s[31]++;if(!req.params.accountNumber){cov_2qn8m28rek.b[4][0]++;cov_2qn8m28rek.s[32]++;sendJSONresponse(res,400,{status:400,error:'You have not specified the account number in the params!'});cov_2qn8m28rek.s[33]++;return;}else{cov_2qn8m28rek.b[4][1]++;}cov_2qn8m28rek.s[34]++;if(!req.body.email){cov_2qn8m28rek.b[5][0]++;cov_2qn8m28rek.s[35]++;sendJSONresponse(res,400,{status:400,error:'Enter your email!'});cov_2qn8m28rek.s[36]++;return;}else{cov_2qn8m28rek.b[5][1]++;}cov_2qn8m28rek.s[37]++;if(!Accounts[req.params.accountNumber]){cov_2qn8m28rek.b[6][0]++;cov_2qn8m28rek.s[38]++;sendJSONresponse(res,404,{status:404,error:"Account number doesn't exist in the first place or it was deleted!"});cov_2qn8m28rek.s[39]++;return;}else{cov_2qn8m28rek.b[6][1]++;}cov_2qn8m28rek.s[40]++;if(!Users[req.body.email]){cov_2qn8m28rek.b[7][0]++;cov_2qn8m28rek.s[41]++;sendJSONresponse(res,404,{status:404,error:'You have not signed up!'});cov_2qn8m28rek.s[42]++;return;}else{cov_2qn8m28rek.b[7][1]++;}cov_2qn8m28rek.s[43]++;if(!((cov_2qn8m28rek.b[9][0]++,hasId(staffIds,parseInt(Users[req.body.email].id,10)))||(cov_2qn8m28rek.b[9][1]++,hasId(adminIds,parseInt(Users[req.body.email].id,10))))){cov_2qn8m28rek.b[8][0]++;cov_2qn8m28rek.s[44]++;sendJSONresponse(res,404,{status:404,error:'Register as Staff or Admin first, using your privately assigned Id!'});cov_2qn8m28rek.s[45]++;return;}else{cov_2qn8m28rek.b[8][1]++;}// eslint-disable-next-line no-unused-expressions
cov_2qn8m28rek.s[46]++;Accounts[req.params.accountNumber].status==='dormant'?(cov_2qn8m28rek.b[10][0]++,Accounts[req.params.accountNumber].status='active'):(cov_2qn8m28rek.b[10][1]++,Accounts[req.params.accountNumber].status='dormant');const account=(cov_2qn8m28rek.s[47]++,Accounts[req.params.accountNumber]);cov_2qn8m28rek.s[48]++;sendJSONresponse(res,201,{status:201,data:account});};cov_2qn8m28rek.s[49]++;module.exports.delete=function(req,res){cov_2qn8m28rek.f[5]++;cov_2qn8m28rek.s[50]++;if(!req.params.accountNumber){cov_2qn8m28rek.b[11][0]++;cov_2qn8m28rek.s[51]++;sendJSONresponse(res,400,{status:400,error:'You have not specified the account number in the params!'});cov_2qn8m28rek.s[52]++;return;}else{cov_2qn8m28rek.b[11][1]++;}cov_2qn8m28rek.s[53]++;if(!req.body.email){cov_2qn8m28rek.b[12][0]++;cov_2qn8m28rek.s[54]++;sendJSONresponse(res,400,{status:400,error:'Enter your email!'});}else{cov_2qn8m28rek.b[12][1]++;cov_2qn8m28rek.s[55]++;if(!Accounts[req.params.accountNumber]){cov_2qn8m28rek.b[13][0]++;cov_2qn8m28rek.s[56]++;sendJSONresponse(res,404,{status:404,error:"Account number doesn't exist in the first place or it was deleted!"});cov_2qn8m28rek.s[57]++;return;}else{cov_2qn8m28rek.b[13][1]++;}const regUserEmail=(cov_2qn8m28rek.s[58]++,Users[req.body.email]);cov_2qn8m28rek.s[59]++;if(!regUserEmail){cov_2qn8m28rek.b[14][0]++;cov_2qn8m28rek.s[60]++;sendJSONresponse(res,404,{status:404,error:'You have not signed up to perform this action!'});cov_2qn8m28rek.s[61]++;return;}else{cov_2qn8m28rek.b[14][1]++;}cov_2qn8m28rek.s[62]++;if(!((cov_2qn8m28rek.b[16][0]++,hasId(staffIds,parseInt(regUserEmail.id,10)))||(cov_2qn8m28rek.b[16][1]++,hasId(adminIds,parseInt(regUserEmail.id,10))))){cov_2qn8m28rek.b[15][0]++;cov_2qn8m28rek.s[63]++;sendJSONresponse(res,404,{status:404,error:'Register as Staff or Admin first, using your privately assigned Id!'});cov_2qn8m28rek.s[64]++;return;}else{cov_2qn8m28rek.b[15][1]++;}cov_2qn8m28rek.s[65]++;delete Accounts[req.params.accountNumber];cov_2qn8m28rek.s[66]++;sendJSONresponse(res,200,{status:204,message:'Account deleted successfully!'});}};